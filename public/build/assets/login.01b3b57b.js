import{u as m,r as i}from"./index.edcb7a78.js";import{_ as p,u as c,a as g,b as h,c as f,S as w,A as b,o as k,d as v,e as s,w as l,f as d,v as u}from"./main.4500d6ff.js";c();const _={setup(){g({title:"Login"})},data(){return{store:h(),v$:m(),loading:!1,message:"",user:{password:"",username:""},lang:f()}},validations(){return{user:{password:{required:i},username:{required:i}}}},computed:{loggedIn(){return localStorage.getItem("user")&&localStorage.getItem("api-token")}},beforeMount(){console.log("PAGE LOGIN")},created(){if(this.loggedIn){const a=JSON.parse(localStorage.getItem("user"));this.redirect(a)}},methods:{redirect(a){console.log("admin dashboard accessed"),this.$router.push({path:"/admin/order/index"})},handleToast(a,e){w.mixin({toast:!0,position:"bottom-right",showConfirmButton:!1,customClass:{popup:`color-${a}`},timer:2500,showCloseButton:!0}).fire({title:e})},async handleLogin(){await this.v$.$validate()?(this.store.isShowMainLoader=!0,b.login(this.user).then(e=>{var o;this.store.isShowMainLoader=!1,this.handleToast("success",this.lang&&((o=this.lang)==null?void 0:o.locale)=="my"?"Berjaya masuk":"Berhasil login"),this.redirect(e)},e=>{this.store.isShowMainLoader=!1,this.handleToast("danger",e.response.data.message)})):this.handleToast("danger","Lengkapi data dengan benar")}}},x={class:"flex justify-center items-center min-h-screen bg-[url('/assets/images/map.svg')] dark:bg-[url('/assets/images/map-dark.svg')] bg-cover bg-center"},S={class:"panel sm:w-[480px] m-6 max-w-lg w-full"},L=s("h2",{class:"font-bold text-2xl mb-3"},"Masuk",-1),M=s("p",{class:"mb-7"},"Masukkan username dan Password kamu untuk login",-1),y=s("label",{for:"username"},"Username",-1),B=s("label",{for:"password"},"Password",-1);function I(a,e,o,C,r,n){return k(),v("div",x,[s("div",S,[L,M,s("form",{class:"space-y-5",onSubmit:e[3]||(e[3]=l((...t)=>n.handleLogin&&n.handleLogin(...t),["prevent"]))},[s("div",null,[y,d(s("input",{id:"username",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>r.user.username=t),class:"form-input",placeholder:"Masukkan Username"},null,512),[[u,r.user.username]])]),s("div",null,[B,d(s("input",{id:"password",type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>r.user.password=t),class:"form-input",placeholder:"Masukkan Password"},null,512),[[u,r.user.password]])]),s("button",{type:"submit",onSubmit:e[2]||(e[2]=l((...t)=>n.handleLogin&&n.handleLogin(...t),["prevent"])),class:"btn btn-primary w-full"}," Masuk ",32)],32)])])}const P=p(_,[["render",I]]);export{P as default};
